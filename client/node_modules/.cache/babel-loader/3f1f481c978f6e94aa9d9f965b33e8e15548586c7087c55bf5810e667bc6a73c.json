{"ast":null,"code":"import React from\"react\";import{useState,useEffect}from\"react\";import axios from\"axios\";import config from\"../../config\";import styles from\"./Home.module.css\";import Header from\"../common/header/Header\";import SearchSection from\"./searchSection/SearchSection\";import JobCard from\"./jobCard/JobCard\";import\"react-toastify/dist/ReactToastify.css\";import{ToastContainer}from\"react-toastify\";import loadingGif from\"../common/loading.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){const[isLoggedIn,setIsLoggedIn]=useState(false);const[userData,setUserData]=useState();const[allSkills,setAllSkills]=useState([]);const[skills,setSkills]=useState([]);const[jobs,setJobs]=useState(null);const[allJobs,setAllJobs]=useState([]);const[searchBy,setSearchBy]=useState(null);useEffect(()=>{const localData=JSON.parse(localStorage.getItem(\"data\"));if(localData){axios.get(config.REACT_APP_BASE_URL+\"/authenticate\",{headers:{token:localData.jwtToken}}).then(res=>{if(res.data.status===202){setIsLoggedIn(true);setUserData(localData);}});}},[]);useEffect(()=>{axios.get(config.REACT_APP_BASE_URL+\"/api/jobs\").then(res=>{let allSkillsToSet=[];res.data.map(jobItem=>{jobItem.skills.map(jobSkill=>{if(!allSkillsToSet.includes(jobSkill)){allSkillsToSet.push(jobSkill);}});});setAllSkills(allSkillsToSet);setAllJobs(res.data);}).catch(()=>console.log(\"Something went wrong!!\"));},[]);useEffect(()=>{axios.get(config.REACT_APP_BASE_URL+\"/api/jobs\",{params:{filterBySkills:skills}}).then(res=>{setAllJobs(res.data);setJobs(res.data);}).catch(res=>console.log(\"error fetching jobs\",res));},[skills]);useEffect(()=>{if(searchBy===\"\"){setJobs([...allJobs]);}else{if(searchBy)setJobs([...allJobs.filter(jobItem=>jobItem.position.toLowerCase().includes(searchBy.toLowerCase()))]);}},[searchBy]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.main,children:[/*#__PURE__*/_jsx(Header,{isLoggedIn:isLoggedIn,userData:userData}),/*#__PURE__*/_jsxs(\"div\",{className:styles.searchSkillsWrapper,children:[/*#__PURE__*/_jsx(SearchSection,{setSearchBy:setSearchBy,isLoggedIn:isLoggedIn,allSkills:allSkills,skills:skills,setSkills:setSkills}),console.log(jobs)||jobs?jobs.length!==0?jobs.map(job=>{return/*#__PURE__*/_jsx(JobCard,{isLoggedIn:isLoggedIn,job:job},job._id);}):/*#__PURE__*/_jsx(\"div\",{children:\"No data found\"}):/*#__PURE__*/_jsx(\"img\",{width:\"200px\",src:loadingGif,alt:\"Loading Animation!!\"})]}),/*#__PURE__*/_jsx(ToastContainer,{position:\"bottom-left\"})]});}","map":{"version":3,"names":["React","useState","useEffect","axios","config","styles","Header","SearchSection","JobCard","ToastContainer","loadingGif","jsx","_jsx","jsxs","_jsxs","Home","isLoggedIn","setIsLoggedIn","userData","setUserData","allSkills","setAllSkills","skills","setSkills","jobs","setJobs","allJobs","setAllJobs","searchBy","setSearchBy","localData","JSON","parse","localStorage","getItem","get","REACT_APP_BASE_URL","headers","token","jwtToken","then","res","data","status","allSkillsToSet","map","jobItem","jobSkill","includes","push","catch","console","log","params","filterBySkills","filter","position","toLowerCase","className","main","children","searchSkillsWrapper","length","job","_id","width","src","alt"],"sources":["C:/Users/jenad/OneDrive/Desktop/Job_Listing/Job_Listing/client/src/components/Home/Home.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport config from \"../../config\";\r\nimport styles from \"./Home.module.css\";\r\nimport Header from \"../common/header/Header\";\r\nimport SearchSection from \"./searchSection/SearchSection\";\r\nimport JobCard from \"./jobCard/JobCard\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport loadingGif from \"../common/loading.svg\";\r\n\r\nexport default function Home() {\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [userData, setUserData] = useState();\r\n  const [allSkills, setAllSkills] = useState([]);\r\n  const [skills, setSkills] = useState([]);\r\n  const [jobs, setJobs] = useState(null);\r\n  const [allJobs, setAllJobs] = useState([]);\r\n  const [searchBy, setSearchBy] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const localData = JSON.parse(localStorage.getItem(\"data\"));\r\n    if (localData) {\r\n      axios\r\n        .get(config.REACT_APP_BASE_URL + \"/authenticate\", {\r\n          headers: {\r\n            token: localData.jwtToken,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          if (res.data.status === 202) {\r\n            setIsLoggedIn(true);\r\n            setUserData(localData);\r\n          }\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(config.REACT_APP_BASE_URL + \"/api/jobs\")\r\n      .then((res) => {\r\n        let allSkillsToSet = [];\r\n        res.data.map((jobItem) => {\r\n          jobItem.skills.map((jobSkill) => {\r\n            if (!allSkillsToSet.includes(jobSkill)) {\r\n              allSkillsToSet.push(jobSkill);\r\n            }\r\n          });\r\n        });\r\n        setAllSkills(allSkillsToSet);\r\n        setAllJobs(res.data);\r\n      })\r\n      .catch(() => console.log(\"Something went wrong!!\"));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(config.REACT_APP_BASE_URL + \"/api/jobs\", {\r\n        params: { filterBySkills: skills },\r\n      })\r\n      .then((res) => {\r\n        setAllJobs(res.data);\r\n        setJobs(res.data);\r\n      })\r\n      .catch((res) => console.log(\"error fetching jobs\", res));\r\n  }, [skills]);\r\n\r\n  useEffect(() => {\r\n    if (searchBy === \"\") {\r\n      setJobs([...allJobs]);\r\n    } else {\r\n      if (searchBy)\r\n      setJobs([\r\n        ...allJobs.filter((jobItem) =>\r\n          jobItem.position.toLowerCase().includes(searchBy.toLowerCase())\r\n        ),\r\n      ]) ;\r\n    }\r\n  }, [searchBy]);\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <Header isLoggedIn={isLoggedIn} userData={userData} />\r\n      <div className={styles.searchSkillsWrapper}>\r\n        <SearchSection\r\n          setSearchBy={setSearchBy}\r\n          isLoggedIn={isLoggedIn}\r\n          allSkills={allSkills}\r\n          skills={skills}\r\n          setSkills={setSkills}\r\n        />\r\n        {console.log(jobs) || jobs ? (\r\n          jobs.length !== 0 ? (\r\n            jobs.map((job) => {\r\n              return (\r\n                <JobCard key={job._id} isLoggedIn={isLoggedIn} job={job} />\r\n              );\r\n            })\r\n          ) : (\r\n            <div>No data found</div>\r\n          )\r\n        ) : (\r\n          <img width=\"200px\" src={loadingGif} alt=\"Loading Animation!!\" />\r\n        )}\r\n      </div>\r\n      <ToastContainer position=\"bottom-left\" />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}